{#
This file represents all code that will be executed for one text context.
#}
import sys
import traceback
import typing

{# A third "channel", used to communicate with the runner #}
{{ code_identifier }}_file = open("{{ output_file }}", "w")

{# Set the arguments #}
{%- if execution.args %}
sys.argv.extend([{{ execution.args | join(', ') }}])
{%- endif -%}
{# Import the code for the first time #}
import submission

{# Handle test cases #}
{% for additional in additionals -%}
sys.stderr.write("--{{ code_identifier }}-- SEP")
sys.stdout.write("--{{ code_identifier }}-- SEP")
{{ code_identifier }}_file.write("--{{ code_identifier }}-- SEP")
{%- with function=additional.input.function %}
typing.send({{ code_identifier }}_file, submission.{% include "function.jinja2" %})
{% endwith %}
{%- endfor %}
